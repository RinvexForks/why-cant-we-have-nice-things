{% extends '_layouts/layout.twig' %}
{% set title = 'RFCs' %}

{% block content %}
    <p class="lead text-center">
        A total of <strong>{{ requests.count() }}</strong> RFCs have been created, <strong>{{ voted.count() }}</strong> have been voted on.<br>
        In total, <strong>{{ percentage(passed) }}%</strong> have passed.
    </p>

    {% include '_partials/search.twig' %}

    <div class="table-responsive">
        <table class="table table-striped table-condensed table-hover">
            <thead>
            <tr>
                <th>Name</th>
                <th class="text-right"># of votes</th>
                <th class="text-right">Approval %</th>
                <th class="text-right">Passed?</th>
                <th class="text-right">Last update</th>
            </tr>
            </thead>
            <tbody>
            {% for request in voted %}
                <tr>
                    <td>
                        <a href="/requests/{{ request.id }}">{{ request.name }}</a>
                    </td>
                    <td class="text-right">{{ request.votes.count() }}</td>
                    <td class="text-right">{{ percentage(request.approval) }}%</td>
                    <td class="text-right {{ request.passed ? 'success' : 'danger' }}">{{ request.votes.count() ? (request.passed ? 'Yes' : 'No') : 'N/A' }}</td>
                    <td class="text-right">{{ request.created_at.toDateString() }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
